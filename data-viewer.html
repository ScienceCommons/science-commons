<!DOCTYPE html>
<html>
<head>
	 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <meta name="google-site-verification" content="7CrO9Y_velY8TjF6s8CWKB1s2S8TGRdQ8NoZ-gHPDE0" />
  <title>Curate Science</title>
  <link data-turbolinks-track="true" href="assets/main.css" media="all" rel="stylesheet" />
  <link rel="stylesheet" href="assets/extra.css">

  <script data-turbolinks-track="true" src="assets/main.js"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="/iDkQk3fySjDxSBGMaWY6CxQ9WzgIX4G/vkMyH6tgaU=" name="csrf-token" />
  <link rel="shortcut icon" type="image/x-icon" href="assets/favicon.ico" />
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
  <script src="assets/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>

<body>


<ul class="nav nav-tabs" id="myTab" style="margin-bottom:15px;">
			  <li class="active"><a data-target="#home" data-toggle="tab">Execute R code</a></li>
			  <li><a data-target="#view-data" data-toggle="tab">View Data</a></li>
			</ul>

			<div class="tab-content">
			  <div class="tab-pane active" id="home">
					
						<div class="wrapper">
							<div class="row">
								<div class="col-md-6">
						
									<p>
										<button id="submitbutton" type="button">Run R Code!</button>
										<br>
										<textarea id="input" rows="10" cols="200">
										library(compute.es)
tes(2.99,25,25)
x = rnorm(1000)
y= rnorm(1000)  		
plot(x,y)
mean(x)
plot(x,x+1)
										</textarea> 

										

										
									</p>
								</div>
								<div class="col-md-6">
									
									<pre><code id="output"></code></pre>
									<!--<div id="plotdiv"></div>-->
									
								</div>
							</div>
						</div>
						
				</div>
				
				<div class="tab-pane" id="view-data">
					<iframe src="https://widgets.figshare.com/articles/3081211/embed?show_title=1" width="800" height="517" frameborder="0"></iframe>					
				</div>
			</div>
	





<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="http://cdn.opencpu.org/opencpu-0.4.js"></script>

<script type="text/javascript">
		//because identity is in base
	ocpu.seturl("//public.opencpu.org/ocpu/library/base/R")

	//actual handler
	$("#submitbutton").on("click", function(){

		//arguments
		var mysnippet = new ocpu.Snippet($("#input").val());
		
		//disable button
		$("button").attr("disabled", "disabled");

		//perform the request
		var req = ocpu.call("identity", {
			"x" : mysnippet
		}, function(session){
			session.getConsole(function(outtxt){
				$("#output").text(outtxt);
			});
		});
		
	
		
		//if R returns an error, alert the error message
		req.fail(function(){
			alert("Server error: " + req.responseText);
		});      
		
		req.always(function(){
			$("button").removeAttr("disabled");    
		});
	});   
</script>

</body>
</html>