<!DOCTYPE html>
<html>
<head>


	
</head>

<body>
<p>

<br><br>
<textarea id="input" rows="4" cols="50">
x = rnorm(1000)
plot(x)
mean(x)  
</textarea> 

<br /> <button id="submitbutton" type="button">Run R Code!</button>

<pre><code id="output"></code></pre>
<!--<div id="plotdiv"></div>-->

<iframe src="https://mfr.osf.io/render?url=https://osf.io/4xrpk/?action=download%26mode=render" width="100%" scrolling="yes" height="950px" marginheight="0" frameborder="0" allowfullscreen webkitallowfullscreen></iframe>



</p>




<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="http://cdn.opencpu.org/opencpu-0.4.js"></script>

<script type="text/javascript">
		//because identity is in base
	ocpu.seturl("//public.opencpu.org/ocpu/library/base/R")

	//actual handler
	$("#submitbutton").on("click", function(){

		//arguments
		var mysnippet = new ocpu.Snippet($("#input").val());
		
		//disable button
		$("button").attr("disabled", "disabled");

		//perform the request
		var req = ocpu.call("identity", {
			"x" : mysnippet
		}, function(session){
			session.getConsole(function(outtxt){
				$("#output").text(outtxt);
			});
		});
		
	
		
		//if R returns an error, alert the error message
		req.fail(function(){
			alert("Server error: " + req.responseText);
		});      
		
		req.always(function(){
			$("button").removeAttr("disabled");    
		});
	});   
</script>

</body>
</html>